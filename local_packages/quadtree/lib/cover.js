"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = _default;

function _default(x, y) {
  if (isNaN(x = +x) || isNaN(y = +y)) return this;
  var x0 = this._x0,
      y0 = this._y0,
      x1 = this._x1,
      y1 = this._y1;

  if (isNaN(x0)) {
    x1 = (x0 = Math.floor(x)) + 1;
    y1 = (y0 = Math.floor(y)) + 1;
  } else {
      var z = x1 - x0,
          node = this._root,
          parent,
          i;

      while (x0 > x || x >= x1 || y0 > y || y >= y1) {
        i = (y < y0) << 1 | x < x0;
        parent = new Array(4), parent[i] = node, node = parent, z *= 2;

        switch (i) {
          case 0:
            x1 = x0 + z, y1 = y0 + z;
            break;

          case 1:
            x0 = x1 - z, y1 = y0 + z;
            break;

          case 2:
            x1 = x0 + z, y0 = y1 - z;
            break;

          case 3:
            x0 = x1 - z, y0 = y1 - z;
            break;
        }
      }

      if (this._root && this._root.length) this._root = node;
    }

  this._x0 = x0;
  this._y0 = y0;
  this._x1 = x1;
  this._y1 = y1;
  return this;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb3Zlci5qcyJdLCJuYW1lcyI6WyJ4IiwieSIsImlzTmFOIiwieDAiLCJfeDAiLCJ5MCIsIl95MCIsIngxIiwiX3gxIiwieTEiLCJfeTEiLCJNYXRoIiwiZmxvb3IiLCJ6Iiwibm9kZSIsIl9yb290IiwicGFyZW50IiwiaSIsIkFycmF5IiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWUsa0JBQVNBLENBQVQsRUFBWUMsQ0FBWixFQUFlO0FBQzVCLE1BQUlDLEtBQUssQ0FBQ0YsQ0FBQyxHQUFHLENBQUNBLENBQU4sQ0FBTCxJQUFpQkUsS0FBSyxDQUFDRCxDQUFDLEdBQUcsQ0FBQ0EsQ0FBTixDQUExQixFQUFvQyxPQUFPLElBQVA7QUFFcEMsTUFBSUUsRUFBRSxHQUFHLEtBQUtDLEdBQWQ7QUFBQSxNQUNJQyxFQUFFLEdBQUcsS0FBS0MsR0FEZDtBQUFBLE1BRUlDLEVBQUUsR0FBRyxLQUFLQyxHQUZkO0FBQUEsTUFHSUMsRUFBRSxHQUFHLEtBQUtDLEdBSGQ7O0FBUUEsTUFBSVIsS0FBSyxDQUFDQyxFQUFELENBQVQsRUFBZTtBQUNiSSxJQUFBQSxFQUFFLEdBQUcsQ0FBQ0osRUFBRSxHQUFHUSxJQUFJLENBQUNDLEtBQUwsQ0FBV1osQ0FBWCxDQUFOLElBQXVCLENBQTVCO0FBQ0FTLElBQUFBLEVBQUUsR0FBRyxDQUFDSixFQUFFLEdBQUdNLElBQUksQ0FBQ0MsS0FBTCxDQUFXWCxDQUFYLENBQU4sSUFBdUIsQ0FBNUI7QUFDRCxHQUhELE1BTUs7QUFDSCxVQUFJWSxDQUFDLEdBQUdOLEVBQUUsR0FBR0osRUFBYjtBQUFBLFVBQ0lXLElBQUksR0FBRyxLQUFLQyxLQURoQjtBQUFBLFVBRUlDLE1BRko7QUFBQSxVQUdJQyxDQUhKOztBQUtBLGFBQU9kLEVBQUUsR0FBR0gsQ0FBTCxJQUFVQSxDQUFDLElBQUlPLEVBQWYsSUFBcUJGLEVBQUUsR0FBR0osQ0FBMUIsSUFBK0JBLENBQUMsSUFBSVEsRUFBM0MsRUFBK0M7QUFDN0NRLFFBQUFBLENBQUMsR0FBRyxDQUFDaEIsQ0FBQyxHQUFHSSxFQUFMLEtBQVksQ0FBWixHQUFpQkwsQ0FBQyxHQUFHRyxFQUF6QjtBQUNBYSxRQUFBQSxNQUFNLEdBQUcsSUFBSUUsS0FBSixDQUFVLENBQVYsQ0FBVCxFQUF1QkYsTUFBTSxDQUFDQyxDQUFELENBQU4sR0FBWUgsSUFBbkMsRUFBeUNBLElBQUksR0FBR0UsTUFBaEQsRUFBd0RILENBQUMsSUFBSSxDQUE3RDs7QUFDQSxnQkFBUUksQ0FBUjtBQUNFLGVBQUssQ0FBTDtBQUFRVixZQUFBQSxFQUFFLEdBQUdKLEVBQUUsR0FBR1UsQ0FBVixFQUFhSixFQUFFLEdBQUdKLEVBQUUsR0FBR1EsQ0FBdkI7QUFBMEI7O0FBQ2xDLGVBQUssQ0FBTDtBQUFRVixZQUFBQSxFQUFFLEdBQUdJLEVBQUUsR0FBR00sQ0FBVixFQUFhSixFQUFFLEdBQUdKLEVBQUUsR0FBR1EsQ0FBdkI7QUFBMEI7O0FBQ2xDLGVBQUssQ0FBTDtBQUFRTixZQUFBQSxFQUFFLEdBQUdKLEVBQUUsR0FBR1UsQ0FBVixFQUFhUixFQUFFLEdBQUdJLEVBQUUsR0FBR0ksQ0FBdkI7QUFBMEI7O0FBQ2xDLGVBQUssQ0FBTDtBQUFRVixZQUFBQSxFQUFFLEdBQUdJLEVBQUUsR0FBR00sQ0FBVixFQUFhUixFQUFFLEdBQUdJLEVBQUUsR0FBR0ksQ0FBdkI7QUFBMEI7QUFKcEM7QUFNRDs7QUFFRCxVQUFJLEtBQUtFLEtBQUwsSUFBYyxLQUFLQSxLQUFMLENBQVdJLE1BQTdCLEVBQXFDLEtBQUtKLEtBQUwsR0FBYUQsSUFBYjtBQUN0Qzs7QUFFRCxPQUFLVixHQUFMLEdBQVdELEVBQVg7QUFDQSxPQUFLRyxHQUFMLEdBQVdELEVBQVg7QUFDQSxPQUFLRyxHQUFMLEdBQVdELEVBQVg7QUFDQSxPQUFLRyxHQUFMLEdBQVdELEVBQVg7QUFDQSxTQUFPLElBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgsIHkpIHtcbiAgaWYgKGlzTmFOKHggPSAreCkgfHwgaXNOYU4oeSA9ICt5KSkgcmV0dXJuIHRoaXM7IC8vIGlnbm9yZSBpbnZhbGlkIHBvaW50c1xuXG4gIHZhciB4MCA9IHRoaXMuX3gwLFxuICAgICAgeTAgPSB0aGlzLl95MCxcbiAgICAgIHgxID0gdGhpcy5feDEsXG4gICAgICB5MSA9IHRoaXMuX3kxO1xuXG4gIC8vIElmIHRoZSBxdWFkdHJlZSBoYXMgbm8gZXh0ZW50LCBpbml0aWFsaXplIHRoZW0uXG4gIC8vIEludGVnZXIgZXh0ZW50IGFyZSBuZWNlc3Nhcnkgc28gdGhhdCBpZiB3ZSBsYXRlciBkb3VibGUgdGhlIGV4dGVudCxcbiAgLy8gdGhlIGV4aXN0aW5nIHF1YWRyYW50IGJvdW5kYXJpZXMgZG9u4oCZdCBjaGFuZ2UgZHVlIHRvIGZsb2F0aW5nIHBvaW50IGVycm9yIVxuICBpZiAoaXNOYU4oeDApKSB7XG4gICAgeDEgPSAoeDAgPSBNYXRoLmZsb29yKHgpKSArIDE7XG4gICAgeTEgPSAoeTAgPSBNYXRoLmZsb29yKHkpKSArIDE7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGRvdWJsZSByZXBlYXRlZGx5IHRvIGNvdmVyLlxuICBlbHNlIHtcbiAgICB2YXIgeiA9IHgxIC0geDAsXG4gICAgICAgIG5vZGUgPSB0aGlzLl9yb290LFxuICAgICAgICBwYXJlbnQsXG4gICAgICAgIGk7XG5cbiAgICB3aGlsZSAoeDAgPiB4IHx8IHggPj0geDEgfHwgeTAgPiB5IHx8IHkgPj0geTEpIHtcbiAgICAgIGkgPSAoeSA8IHkwKSA8PCAxIHwgKHggPCB4MCk7XG4gICAgICBwYXJlbnQgPSBuZXcgQXJyYXkoNCksIHBhcmVudFtpXSA9IG5vZGUsIG5vZGUgPSBwYXJlbnQsIHogKj0gMjtcbiAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICBjYXNlIDA6IHgxID0geDAgKyB6LCB5MSA9IHkwICsgejsgYnJlYWs7XG4gICAgICAgIGNhc2UgMTogeDAgPSB4MSAtIHosIHkxID0geTAgKyB6OyBicmVhaztcbiAgICAgICAgY2FzZSAyOiB4MSA9IHgwICsgeiwgeTAgPSB5MSAtIHo7IGJyZWFrO1xuICAgICAgICBjYXNlIDM6IHgwID0geDEgLSB6LCB5MCA9IHkxIC0gejsgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Jvb3QgJiYgdGhpcy5fcm9vdC5sZW5ndGgpIHRoaXMuX3Jvb3QgPSBub2RlO1xuICB9XG5cbiAgdGhpcy5feDAgPSB4MDtcbiAgdGhpcy5feTAgPSB5MDtcbiAgdGhpcy5feDEgPSB4MTtcbiAgdGhpcy5feTEgPSB5MTtcbiAgcmV0dXJuIHRoaXM7XG59XG4iXX0=